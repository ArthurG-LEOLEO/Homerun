---
import { type SbBlokData, storyblokEditable } from "@storyblok/astro";

import PlanItem from "../../components/atoms/PlanItem.astro";
import BottomNotesItem from "../../components/atoms/BottomNotesItem.astro";
import CustomColsItem from "../../components/atoms/CustomColsItem.astro";
import CTA from "../../components/global/CTA.astro";

const { language, blok } = Astro.props;
---

<div
    class="container-main flex flex-col gap-32 py-50 md:py-100 lg:gap-48"
    {...storyblokEditable(blok)}
>
    <div
        class="px-gutter flex flex-col items-center gap-80 lg:flex-row lg:items-start lg:gap-20"
    >
        {
            blok.items.map((item: SbBlokData) => (
                <PlanItem
                    class="w-full max-w-600 flex-1 lg:max-w-none"
                    blok={item}
                    from_label={blok.from_label}
                    per_period_label={blok.per_period_label}
                    included_label={blok.included_label}
                    choose_label={blok.choose_label}
                />
            ))
        }
    </div>
    {
        blok.bottom_notes && blok.bottom_notes.length > 0 && (
            <div class="px-gutter flex flex-col gap-12 lg:gap-16">
                {blok.bottom_notes.map((item: SbBlokData) => (
                    <BottomNotesItem blok={item} />
                ))}
            </div>
        )
    }
    <div
        class="before:left-gutter before:right-gutter relative py-48 text-white before:absolute before:top-0 before:bottom-0 before:z-[-1] before:bg-black xl:py-72"
    >
        <div class="mx-auto w-10/12 lg:flex">
            <div class="px-gutter lg:w-3/10 lg:flex-none">
                <h2 class="text-title-3">{blok.custom_title}</h2>
                <div class="hidden lg:mt-30 lg:block">
                    <CTA
                        label={blok.custom_link_label}
                        color="orange"
                        type="submit"
                        icon="arrow-right"
                    />
                </div>
            </div>
            <div
                class="px-gutter mt-24 flex flex-col gap-24 md:flex-row lg:mt-0 lg:flex-1 xl:gap-72"
            >
                {
                    blok.custom_cols.map((item: SbBlokData) => (
                        <CustomColsItem blok={item} />
                    ))
                }
            </div>
            <div class="px-gutter mt-32 lg:hidden">
                <CTA
                    label={blok.custom_link_label}
                    color="orange"
                    type="submit"
                    icon="arrow-right"
                />
            </div>
        </div>
    </div>
</div>
